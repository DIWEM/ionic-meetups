!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("quagga"),require("@angular/common"),require("@angular/core")):"function"==typeof define&&define.amd?define("ngx-barcode-scanner",["exports","quagga","@angular/common","@angular/core"],t):t(e["ngx-barcode-scanner"]={},e.Quagga,e.ng.common,e.ng.core)}(this,function(e,a,t,n){"use strict";var r={inputStream:{name:"Live",type:"LiveStream",target:null,constraints:{width:{min:640},height:{min:480},aspectRatio:{min:1,max:100},facingMode:"environment"},singleChannel:!1},locator:{patchSize:"medium",halfSample:!0},locate:!0,numOfWorkers:4,decoder:{readers:["code_128_reader"]}},o=function(){function e(){this.valueChanges=new n.EventEmitter,this.started=!1,this.configQuagga=r}return e.prototype.ngOnDestroy=function(){this.stop()},e.prototype.ngOnChanges=function(e){this.retart()},e.prototype._init=function(){var o=this;return new Promise(function(t,n){a.onProcessed(function(e){return o.onProcessed(e)}),a.onDetected(function(e){return o.onDetected(e)}),o.configQuagga.inputStream.target=o.barecodeScanner.nativeElement,o.type&&(o.configQuagga.decoder.readers=function r(e){return[e+"_reader"]}(o.type)),a.init(o.configQuagga,function(e){if(e)return console.log(e),n(e);t()})})},e.prototype.start=function(){var e=this;return this.started?Promise.resolve():this._init().then(function(){a.start(),e.started=!0,console.log("started")})},e.prototype.stop=function(){this.started&&(a.stop(),this.started=!1,console.log("stopped"))},e.prototype.retart=function(){this.started&&(this.stop(),this.start())},e.prototype.isStarted=function(){return this.started},e.prototype.onProcessed=function(t){var n=a.canvas.ctx.overlay,e=a.canvas.dom.overlay;t&&(t.boxes&&(n.clearRect(0,0,parseInt(e.getAttribute("width")),parseInt(e.getAttribute("height"))),t.boxes.filter(function(e){return e!==t.box}).forEach(function(e){a.ImageDebug.drawPath(e,{x:0,y:1},n,{color:"green",lineWidth:2})})),t.box&&a.ImageDebug.drawPath(t.box,{x:0,y:1},n,{color:"#00F",lineWidth:2}),t.codeResult&&t.codeResult.code&&a.ImageDebug.drawPath(t.line,{x:"x",y:"y"},n,{color:"red",lineWidth:3}))},e.prototype.onDetected=function(e){this.valueChanges.next(e)},e.decorators=[{type:n.Component,args:[{selector:"barcode-scanner-livestream",template:'<div #BarecodeScanner class="scanner" [hidden]="!isStarted()">\n</div>',encapsulation:n.ViewEncapsulation.None,styles:[".scanner{position:relative}.scanner canvas,.scanner video{max-width:100%;width:100%}.scanner canvas.drawingBuffer{position:absolute;left:0;top:0}"]}]}],e.propDecorators={type:[{type:n.Input}],valueChanges:[{type:n.Output}],barecodeScanner:[{type:n.ViewChild,args:["BarecodeScanner"]}]},e}(),i=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule],declarations:[o],exports:[o]}]}],e}(),s=function(){function e(){this.valueChanges=new n.EventEmitter,this._showScanner=!1}return Object.defineProperty(e.prototype,"showScanner",{get:function(){return this._showScanner},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.scanner.stop()},e.prototype.show=function(){this._showScanner=!0,this.scanner.start()},e.prototype.hide=function(){this._showScanner=!1,this.scanner.stop()},e.prototype.onValueChanges=function(e){this.valueChanges.next(e)},e.decorators=[{type:n.Component,args:[{selector:"barcode-scanner-livestream-overlay",template:'<div class="barcode-scanner-livestream-overlay" [hidden]="!showScanner">\n    <div class="barcode-scanner-livestream-overlay-content">\n        <div class="barcode-scanner-livestream-overlay-close" (click)="hide()">X</div>\n        <barcode-scanner-livestream [type]="type" (valueChanges)="onValueChanges($event)"></barcode-scanner-livestream>\n    </div>\n</div>',styles:[".barcode-scanner-livestream-overlay{overflow:hidden;position:fixed;top:0;bottom:0;left:0;right:0;width:100%;background-color:rgba(0,0,0,.3);z-index:1000}.barcode-scanner-livestream-overlay .barcode-scanner-livestream-overlay-content{top:50%;position:absolute;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:90%;max-height:90%;max-width:800px}.barcode-scanner-livestream-overlay .barcode-scanner-livestream-overlay-content .barcode-scanner-livestream-overlay-close{position:absolute;right:0;padding:.5rem;width:2rem;height:2rem;line-height:2rem;text-align:center;background-color:#fff;cursor:pointer;border:3px solid #000;font-size:1.5rem;margin:-1rem;border-radius:2rem;z-index:100;box-sizing:content-box}"]}]}],e.propDecorators={type:[{type:n.Input}],valueChanges:[{type:n.Output}],scanner:[{type:n.ViewChild,args:[o]}]},e}(),c=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,i],declarations:[s],exports:[s]}]}],e}();e.BarecodeScannerLivestreamModule=i,e.BarecodeScannerLivestreamComponent=o,e.BarecodeScannerLivestreamOverlayModule=c,e.BarecodeScannerLivestreamOverlayComponent=s,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-barcode-scanner.umd.min.js.map